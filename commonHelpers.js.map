{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst form = document.querySelector(\".form\");\nconst searchInput = document.querySelector(\".search-input\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n});\nconst loadButton = document.querySelector(\".load-button\");\nconst imgLimit = 40;\nlet pages = 1;\nconst httpParams = {\n    params: {\n        key: \"41831359-da2252ca47ee8686c562d4834\",\n        q: \"\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: imgLimit,\n        page: pages\n    }\n}\nconst imgHTML = (resolve) => {\n    const html = resolve.data.hits.reduce((acum, elem) => {\n        return acum += `<li class=\"gallery-item\">\n                            <a href=\"${elem.largeImageURL}\">\n                                <img class=\"gallery-img\" src=\"${elem.webformatURL}\" alt=\"${elem.tags}\"/>\n                            </a>\n                            <div class=\"img-text-cont\">\n                                <div class=\"img-text\">\n                                    <p>Likes</p>\n                                    <p>${elem.likes}</p>\n                                </div>\n                                <div class=\"img-text\">\n                                    <p>Views</p>\n                                    <p>${elem.views}</p>\n                                </div>\n                                <div class=\"img-text\">\n                                    <p>Comments</p>\n                                    <p>${elem.comments}</p>\n                                </div>\n                                <div class=\"img-text\">\n                                    <p>Downloads</p>\n                                    <p>${elem.downloads}</p>\n                                </div>\n                            </div>\n                        </li>`\n    }, \"\");\n    return html;\n}\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    pages = 1;\n    httpParams.params.page = pages;\n    httpParams.params.q = searchInput.value;\n    loader.classList.remove(\"is-hidden\");\n    loadButton.classList.add(\"is-hidden\");\n    gallery.innerHTML = \"\";\n    try {\n        const resolve = await axios.get(`https://pixabay.com/api/`, httpParams);\n        if (resolve.data.hits.length > 0) {   \n            gallery.innerHTML = imgHTML(resolve);\n            loadButton.classList.remove(\"is-hidden\")\n            lightbox.refresh();\n        } else {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        console.log(error)\n        iziToast.error({\n            message: \"Something went wrong...\",\n            position: 'topRight'\n        });\n    } finally {\n        loader.classList.add(\"is-hidden\")\n    };\n});\nloadButton.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    pages += 1;\n    httpParams.params.page = pages;\n    const resolve = await axios.get(`https://pixabay.com/api/`, httpParams);\n    if (pages <= Math.ceil(resolve.data.totalHits / imgLimit)) {\n        gallery.insertAdjacentHTML(\"beforeend\", imgHTML(resolve));\n        lightbox.refresh();\n        const galleryItem = document.querySelector(\".gallery-item\");\n        scrollBy({\n            top: galleryItem.getBoundingClientRect().height * 2,\n            behavior: \"smooth\",\n        });\n    } else {\n        loadButton.classList.add(\"is-hidden\");\n        iziToast.error({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight'\n        });\n    }\n});"],"names":["form","searchInput","gallery","loader","lightbox","SimpleLightbox","loadButton","imgLimit","pages","httpParams","imgHTML","resolve","acum","elem","event","axios","iziToast","error","galleryItem"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,KAClB,CAAC,EACKC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAW,GACjB,IAAIC,EAAQ,EACZ,MAAMC,EAAa,CACf,OAAQ,CACJ,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUF,EACV,KAAMC,CACT,CACL,EACME,EAAWC,GACAA,EAAQ,KAAK,KAAK,OAAO,CAACC,EAAMC,IAClCD,GAAQ;AAAA,uCACgBC,EAAK;AAAA,gEACoBA,EAAK,sBAAsBA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA,yCAKvDA,EAAK;AAAA;AAAA;AAAA;AAAA,yCAILA,EAAK;AAAA;AAAA;AAAA;AAAA,yCAILA,EAAK;AAAA;AAAA;AAAA;AAAA,yCAILA,EAAK;AAAA;AAAA;AAAA,+BAIvC,EAAE,EAGTb,EAAK,iBAAiB,SAAU,MAAOc,GAAU,CAC7CA,EAAM,eAAc,EACpBN,EAAQ,EACRC,EAAW,OAAO,KAAOD,EACzBC,EAAW,OAAO,EAAIR,EAAY,MAClCE,EAAO,UAAU,OAAO,WAAW,EACnCG,EAAW,UAAU,IAAI,WAAW,EACpCJ,EAAQ,UAAY,GACpB,GAAI,CACA,MAAMS,EAAU,MAAMI,EAAM,IAAI,2BAA4BN,CAAU,EAClEE,EAAQ,KAAK,KAAK,OAAS,GAC3BT,EAAQ,UAAYQ,EAAQC,CAAO,EACnCL,EAAW,UAAU,OAAO,WAAW,EACvCF,EAAS,QAAO,GAEhBY,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,CAER,OAAQC,EAAP,CACE,QAAQ,IAAIA,CAAK,EACjBD,EAAS,MAAM,CACX,QAAS,0BACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNb,EAAO,UAAU,IAAI,WAAW,CAExC,CAAA,CAAC,EACDG,EAAW,iBAAiB,QAAS,MAAOQ,GAAU,CAClDA,EAAM,eAAc,EACpBN,GAAS,EACTC,EAAW,OAAO,KAAOD,EACzB,MAAMG,EAAU,MAAMI,EAAM,IAAI,2BAA4BN,CAAU,EACtE,GAAID,GAAS,KAAK,KAAKG,EAAQ,KAAK,UAAYJ,CAAQ,EAAG,CACvDL,EAAQ,mBAAmB,YAAaQ,EAAQC,CAAO,CAAC,EACxDP,EAAS,QAAO,EAChB,MAAMc,EAAc,SAAS,cAAc,eAAe,EAC1D,SAAS,CACL,IAAKA,EAAY,sBAAuB,EAAC,OAAS,EAClD,SAAU,QACtB,CAAS,CACT,MACQZ,EAAW,UAAU,IAAI,WAAW,EACpCU,EAAS,MAAM,CACX,QAAS,6DACT,SAAU,UACtB,CAAS,CAET,CAAC"}